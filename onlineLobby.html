<!DOCTYPE html>
<html>
    <head>
        <title>Online Mode: Lobby</title>
        <link rel = "stylesheet" href = "css/styling.css">
        <link rel = "icon" href = "projectFiles/icon.ico">
        <script src="js/generateGame.js"></script>
    </head>

    <body id = "index">
        <div class="navbar">
            <a href="index.html">Home</a>
            <div class="dropdown">
                <button class="dropbtn">Online Mode &#9660;
                    <i class="fa fa-caret-down"></i>
                </button>

                <div class="dropdown-content">
                    <a href="onlineCreate.html">Create</a>
                    <a href="onlineJoin.html">Join</a>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropbtn">Offline Mode &#9660;
                    <i class="fa fa-caret-down"></i>
                </button>

                <div class="dropdown-content">
                    <a href="offlineEasy.html">Easy</a>
                    <a href="offlineMedium.html">Medium</a>
                    <a href="offlineHard.html">Difficult</a>
                    <a href="offlineCustom.html">Custom</a>
                </div>
            </div>
        </div>
        
        <label id="waiter">Please wait until the host starts the game</label>

        <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-database.js"></script>

        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyDpREM9IPNuoVLjX0Yv74IA5f9aUnysK-U",
                authDomain: "memoryapp-69da9.firebaseapp.com",
                databaseURL: "https://memoryapp-69da9.firebaseio.com",
                projectId: "memoryapp-69da9",
                storageBucket: "memoryapp-69da9.appspot.com",
                messagingSenderId: "315432298371",
                appId: "1:315432298371:web:df4285484600df6af438b6"
            };
            try {firebase.initializeApp(firebaseConfig);}
            catch {}
            var database = firebase.database();

            database.ref('IsRunning/' + localStorage.getItem('clientID') + '/value').on('value', function(snapshot) {
                if(snapshot.val() == true) {
                    document.getElementById('waiter').innerHTML = "Game begins in 3";
                    setTimeout(function() {document.getElementById('waiter').innerHTML = "Game begins in 2";}, 1000)
                    setTimeout(function() {document.getElementById('waiter').innerHTML = "Game begins in 1";}, 2000)
                    setTimeout(function() {document.getElementById('waiter').innerHTML = "Game begins in 0"; setTimeout(function() {location.href = 'onlineClient.html';}, 100);}, 3000)
                }
            });
        </script>
    </body>
</html>